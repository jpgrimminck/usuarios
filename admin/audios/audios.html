<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Audios</title>
  <link rel="stylesheet" href="audios.css">
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="../../config.js"></script>
</head>
<body class="audios-body">
  
  <!-- Header -->
  <header class="header">
    <div class="header-top">
      <a href="../index.html" class="back-btn">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M19 12H5M12 19l-7-7 7-7"/>
        </svg>
      </a>
      <h1 class="header-title">Audios</h1>
      <div class="header-actions">
        <button id="refresh-btn" class="icon-btn" title="Actualizar">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M21 2v6h-6M3 22v-6h6M21 12A9 9 0 0 0 6 5.3L3 8M3 12a9 9 0 0 0 15 6.7l3-2.7"/>
          </svg>
        </button>
      </div>
    </div>
    
    <!-- Stats -->
    <div class="stats-row">
      <div class="stat-item">
        <div id="stat-count" class="stat-value">--</div>
        <div class="stat-label">Total Audios</div>
      </div>
      <div class="stat-item">
        <div id="stat-size" class="stat-value">--</div>
        <div class="stat-label">Espacio Usado</div>
      </div>
    </div>
    
    <!-- Filters -->
    <div class="filters-row">
      <select id="filter-uploader" class="filter-select">
        <option value="">Todos los usuarios</option>
      </select>
      <select id="filter-song" class="filter-select">
        <option value="">Todas las canciones</option>
      </select>
    </div>
  </header>

  <!-- Main content -->
  <main class="main-content">
    <div id="audio-list" class="audio-list">
      <div class="loading-state">
        <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M21 2v6h-6M3 22v-6h6M21 12A9 9 0 0 0 6 5.3L3 8M3 12a9 9 0 0 0 15 6.7l3-2.7"/>
        </svg>
        <span>Cargando audios...</span>
      </div>
    </div>
  </main>

  <!-- Detail Modal (Bottom Sheet) -->
  <div id="detail-modal" class="modal-overlay">
    <div class="modal-sheet">
      <div class="modal-handle">
        <div class="modal-handle-bar"></div>
      </div>
      <div class="modal-header">
        <h2 id="detail-title" class="modal-title">Nombre del audio</h2>
        <div id="detail-subtitle" class="modal-subtitle">ID: 123</div>
      </div>
      <div class="modal-body">
        <div class="detail-grid">
          <div class="detail-item">
            <span class="detail-label">Canción</span>
            <span id="detail-song" class="detail-value">--</span>
          </div>
          <div class="detail-item">
            <span class="detail-label">Subido por</span>
            <span id="detail-uploader" class="detail-value">--</span>
          </div>
          <div class="detail-item">
            <span class="detail-label">Detalle</span>
            <span id="detail-detail" class="detail-value">--</span>
          </div>
          <div class="detail-item">
            <span class="detail-label">Fecha</span>
            <span id="detail-date" class="detail-value">--</span>
          </div>
          <div class="detail-item">
            <span class="detail-label">Formato</span>
            <span id="detail-format" class="detail-value">--</span>
          </div>
          <div class="detail-item">
            <span class="detail-label">Tamaño</span>
            <span id="detail-size" class="detail-value loading">Cargando...</span>
          </div>
          <div class="detail-item">
            <span class="detail-label">Duración</span>
            <span id="detail-duration" class="detail-value loading">Cargando...</span>
          </div>
          <div class="detail-item">
            <span class="detail-label">Sample Rate</span>
            <span id="detail-samplerate" class="detail-value loading">Cargando...</span>
          </div>
        </div>
        <div class="modal-actions">
          <button id="action-edit" class="action-btn primary">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
              <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
            </svg>
            Editar nombre
          </button>
          <button id="action-delete" class="action-btn danger">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="3 6 5 6 21 6"/>
              <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
            </svg>
            Eliminar audio
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Edit Modal -->
  <div id="edit-overlay" class="edit-overlay">
    <div class="edit-modal">
      <h3>Editar nombre</h3>
      <input type="text" id="edit-input" class="edit-input" placeholder="Nombre del audio">
      <div class="edit-buttons">
        <button id="edit-cancel" class="action-btn secondary">Cancelar</button>
        <button id="edit-save" class="action-btn primary">Guardar</button>
      </div>
    </div>
  </div>

  <!-- Delete Modal -->
  <div id="delete-overlay" class="delete-overlay">
    <div class="delete-modal">
      <h3>¿Eliminar audio?</h3>
      <p id="delete-name" class="confirm-name"></p>
      <p class="warning">Esta acción no se puede deshacer. Se eliminará el archivo y el registro.</p>
      <div class="delete-buttons">
        <button id="delete-cancel" class="action-btn secondary">Cancelar</button>
        <button id="delete-confirm" class="action-btn danger">Eliminar</button>
      </div>
    </div>
  </div>

  <script src="audios.js"></script>
</body>
</html>
